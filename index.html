<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bring Back VC - Immersive Studio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage.js"></script>
</head>
<body class="bg-gray-900 text-gray-200 font-serif">
  <!-- Welcome Pop-up -->
  <div id="welcome-popup" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50">
    <div class="bg-gray-800 p-8 rounded-lg text-center">
      <h2 class="text-3xl font-bold text-yellow-400 mb-4">Welcome to Bring Back VC</h2>
      <p class="mb-6 text-gray-300">click to join.</p>
      <button id="join-now-btn" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-6 rounded">Join Now</button>
    </div>
  </div>

  <div class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-black/20 backdrop-blur-md border-b border-gray-700/50 p-4 flex justify-between items-center fixed w-full z-40">
      <h1 class="text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">Bring Back VC</h1>
      <nav class="flex space-x-1 items-center">
        <a href="#studio" class="nav-link px-6 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-800 rounded-md transition-all duration-300" aria-label="Navigate to Studio section">Studio</a>
        <a href="#archive" class="nav-link px-6 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-800 rounded-md transition-all duration-300" aria-label="Navigate to Archive section">Archive</a>
        <a href="#about" class="nav-link px-6 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-800 rounded-md transition-all duration-300" aria-label="Navigate to About section">About</a>
        <a href="#tokenomics" class="nav-link px-6 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-purple-600 rounded-md transition-all duration-300" aria-label="Navigate to Tokenomics section">Tokenomics</a>
        <a href="#why-buy" class="nav-link px-6 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-800 rounded-md transition-all duration-300" aria-label="Navigate to Why Buy section">Why Buy</a>
      </nav>
    </header>

    <!-- Studio Section -->
    <section id="studio" class="flex-1 relative pt-24 bg-gray-900">
      <div class="max-w-6xl mx-auto py-12 px-6">
        <div class="text-center mb-12">
          <h2 class="text-5xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">Welcome to our Studio</h2>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">Immerse yourself in our interactive studio for voice-driven collaboration.</p>
          <p class="text-lg text-gray-400 mt-4">Contract Address: 
            <span id="contract-address" class="text-blue-400 cursor-pointer relative group" onclick="copyToClipboard('3vXsFNrv5akgWVx47ZrRa3ruR2epYW85HbXqTrVkpump')" title="Click to copy">
              3vXsFNrv5akgWVx47ZrRa3ruR2epYW85HbXqTrVkpump
              <span class="absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-gray-200 text-xs rounded py-1 px-2">Click to copy</span>
            </span>
          </p>
        </div>
        <div id="canvas-container" class="w-full h-[60vh] rounded-xl border bg-gradient-to-br from-blue-900/50 to-blue-800/50 border-blue-700 backdrop-blur-sm">
          <canvas id="studio-canvas" class="w-full h-full"></canvas>
        </div>
        <!-- Voice Recording Controls -->
        <div class="mt-8 bg-gradient-to-br from-blue-900/50 to-blue-800/50 border border-blue-700 rounded-xl p-6">
          <h3 class="text-2xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">Voice Recording Studio</h3>
          <div class="flex flex-col items-center space-y-4">
            <div class="flex space-x-4">
              <button id="record-btn" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-6 rounded disabled:opacity-50" disabled>Record</button>
              <button id="stop-btn" class="bg-red-500 hover:bg-red-600 text-gray-900 font-bold py-2 px-6 rounded hidden">Stop</button>
              <p id="record-status" class="text-sm text-gray-400 self-center"></p>
            </div>
            <div id="effect-controls" class="flex flex-col space-y-4 w-full max-w-md hidden">
              <div>
                <label for="effect-select" class="text-sm text-gray-300">Audio Effect</label>
                <select id="effect-select" class="bg-gray-700 text-gray-200 p-2 rounded w-full">
                  <option value="none">No Effect</option>
                  <option value="reverb">Reverb</option>
                  <option value="pitch-up">Pitch Up</option>
                  <option value="pitch-down">Pitch Down</option>
                </select>
              </div>
              <div>
                <label for="eq-low" class="text-sm text-gray-300">Low Frequency (Bass)</label>
                <input type="range" id="eq-low" min="-12" max="12" value="0" class="w-full accent-blue-500">
              </div>
              <div>
                <label for="eq-mid" class="text-sm text-gray-300">Mid Frequency</label>
                <input type="range" id="eq-mid" min="-12" max="12" value="0" class="w-full accent-blue-500">
              </div>
              <div>
                <label for="eq-high" class="text-sm text-gray-300">High Frequency (Treble)</label>
                <input type="range" id="eq-high" min="-12" max="12" value="0" class="w-full accent-blue-500">
              </div>
              <div>
                <label for="recording-name" class="text-sm text-gray-300">Recording Name</label>
                <input type="text" id="recording-name" placeholder="Enter recording name" class="bg-gray-700 text-gray-200 p-2 rounded w-full">
              </div>
              <button id="save-btn" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-6 rounded">Save Recording</button>
            </div>
            <div>
              <label for="upload-audio" class="bg-blue-500 hover:bg-blue-600 text-gray-900 font-bold py-2 px-6 rounded cursor-pointer">Upload Audio</label>
              <input type="file" id="upload-audio" accept="audio/*" class="hidden">
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Archive Section -->
    <section id="archive" class="py-12 px-6 bg-gray-900">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-5xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">Voice Archive</h2>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">Explore and play back community voice recordings.</p>
        </div>
        <div class="rounded-xl border bg-gradient-to-br from-blue-900/50 to-blue-800/50 border-blue-700 backdrop-blur-sm">
          <div class="p-8">
            <div id="recordings-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-12 px-6 bg-gray-900">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-5xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">About Bring Back VC</h2>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">A vibrant project launched on Solana, reigniting the VC culture.</p>
        </div>
        <div class="rounded-xl border bg-gradient-to-br from-blue-900/50 to-blue-800/50 border-blue-700 backdrop-blur-sm">
          <div class="p-8 text-center">
            <p class="text-gray-300">To be honest, I believe one of the key reasons we're not seeing the same momentum in the market is because we've lost sight of the human element behind it. A year ago, many of us would spend hours together in voice chats ‚Äî sharing ideas, building trust, and strategizing with real people, not just usernames. Those connections created powerful communities that moved together with purpose. Now, without that direct interaction, it's become easier to disconnect emotionally ‚Äî easier to sell, easier to walk away. We've lost more than just market energy; we've lost the sense of shared humanity that made this space thrive. It's time to bring back voice chats. Bring back real conversations. Because when we hear each other, we remember that there's a person behind every trade, and that‚Äôs what builds strong, lasting communities. BRING BACK $VC</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Tokenomics Section -->
    <section id="tokenomics" class="py-12 px-6 bg-gray-900">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-5xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">Tokenomics</h2>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">Bring Back VC Token features a unique deflationary model designed for sustainable growth</p>
        </div>
        <div class="grid md:grid-cols-3 gap-8 mb-12">
          <div id="total-supply-card" class="rounded-xl border bg-gradient-to-br from-blue-900/50 to-blue-800/50 border-blue-700 backdrop-blur-sm h-full transform transition-transform duration-300 hover:scale-105">
            <div class="p-8 text-center">
              <div class="text-4xl mb-4">ü™ô</div>
              <h3 class="text-2xl font-bold mb-4 text-blue-400">Total Supply</h3>
              <p class="text-3xl font-bold text-white mb-2">1 Billion</p>
              <p class="text-gray-300">Fixed maximum supply ensures scarcity and value preservation</p>
            </div>
          </div>
          <div class="rounded-xl border bg-gradient-to-br from-red-900/50 to-orange-800/50 border-red-700 backdrop-blur-sm h-full">
            <div class="p-8 text-center">
              <div class="text-4xl mb-4">üî•</div>
              <h3 class="text-2xl font-bold mb-4 text-red-400">Burn Mechanism</h3>
              <p class="text-3xl font-bold text-white mb-2">1% Liquidity</p>
              <p class="text-gray-300">Continuous burning creates deflationary pressure and increases value</p>
            </div>
          </div>
          <div class="rounded-xl border bg-gradient-to-br from-green-900/50 to-emerald-800/50 border-green-700 backdrop-blur-sm h-full">
            <div class="p-8 text-center">
              <div class="text-4xl mb-4">üí∏</div>
              <h3 class="text-2xl font-bold mb-4 text-green-400">Zero Tax</h3>
              <p class="text-3xl font-bold text-white mb-2">0% Fees</p>
              <p class="text-gray-300">Seamless transactions without any additional costs or barriers</p>
            </div>
          </div>
        </div>
        <div class="rounded-xl border bg-gradient-to-r from-purple-900/50 to-pink-900/50 border-purple-700 backdrop-blur-sm">
          <div class="p-8">
            <h3 class="text-2xl font-semibold mb-6 text-center text-white">Tokenomics Benefits</h3>
            <div class="grid md:grid-cols-2 gap-8">
              <div>
                <h4 class="text-lg font-semibold mb-3 text-purple-400">Deflationary Model</h4>
                <ul class="space-y-2 text-gray-300">
                  <li>‚Ä¢ 1% of liquidity burnt regularly</li>
                  <li>‚Ä¢ Reduces total supply over time</li>
                  <li>‚Ä¢ Creates upward price pressure</li>
                  <li>‚Ä¢ Rewards long-term holders</li>
                </ul>
              </div>
              <div>
                <h4 class="text-lg font-semibold mb-3 text-pink-400">Zero Tax Policy</h4>
                <ul class="space-y-2 text-gray-300">
                  <li>‚Ä¢ No buy or sell taxes</li>
                  <li>‚Ä¢ Encourages active trading</li>
                  <li>‚Ä¢ Seamless user experience</li>
                  <li>‚Ä¢ Lower barrier to entry</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="text-center mt-12">
          <h3 class="text-3xl font-bold mb-4 bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent">Live Token Data</h3>
          <p class="text-gray-400">Real-time market information</p>
        </div>
        <div class="grid md:grid-cols-4 gap-6 mt-8">
          <div id="price-card" class="rounded-xl border bg-gradient-to-br from-green-900/50 to-emerald-800/50 border-green-700 backdrop-blur-sm transform transition-transform duration-300">
            <div class="p-6 text-center">
              <div class="text-2xl mb-2">üí∞</div>
              <h4 class="text-lg font-semibold text-green-400 mb-2">Price</h4>
              <p id="price" class="text-2xl font-bold text-white">$0.000000</p>
            </div>
          </div>
          <div id="holders-card" class="rounded-xl border bg-gradient-to-br from-blue-900/50 to-cyan-800/50 border-blue-700 backdrop-blur-sm">
            <div class="p-6 text-center">
              <div class="text-2xl mb-2">üë•</div>
              <h4 class="text-lg font-semibold text-blue-400 mb-2">Holders</h4>
              <p id="holders" class="text-2xl font-bold text-white">1,677</p>
            </div>
          </div>
          <div class="rounded-xl border bg-gradient-to-br from-green-900/50 to-lime-800/50 border-green-700 backdrop-blur-sm">
            <div class="p-6 text-center">
              <div class="text-2xl mb-2">üìà</div>
              <h4 class="text-lg font-semibold text-green-400 mb-2">24h Change</h4>
              <p id="price-change" class="text-2xl font-bold text-green-400">N/A</p>
            </div>
          </div>
          <div class="rounded-xl border bg-gradient-to-br from-purple-900/50 to-indigo-800/50 border-purple-700 backdrop-blur-sm">
            <div class="p-6 text-center">
              <div class="text-2xl mb-2">üìä</div>
              <h4 class="text-lg font-semibold text-purple-400 mb-2">24h Volume</h4>
              <p id="volume" class="text-2xl font-bold text-white">N/A</p>
            </div>
          </div>
        </div>
        <div class="mt-6 text-center">
          <p class="text-gray-400 text-sm">Bonding Curve Progress: 0.0% (0 SOL in bonding curve)</p>
          <p id="last-updated" class="text-gray-400 text-sm mt-2">Last updated: 06:51 AM, July 31, 2025</p>
          <p class="text-gray-500 text-xs mt-1">Data refreshes every 30 seconds</p>
        </div>
      </div>
    </section>

    <!-- Why Buy Section -->
    <section id="why-buy" class="py-12 px-6 bg-gray-900">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-5xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">Why Buy Bring Back VC</h2>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">Wondering why you should dive into the VC space? It's not just about the capital it's about embracing a culture of innovation, seizing unique opportunities, and joining a community that leads change. Here's why your next step should be VC.</p>
        </div>
        <div class="rounded-xl border bg-gradient-to-br from-blue-900/50 to-blue-800/50 border-blue-700 backdrop-blur-sm">
          <div class="p-8">
            <ul class="list-disc list-inside text-gray-300 space-y-2 max-w-2xl mx-auto">
              <li><strong class="text-blue-400">Opportunities üíº:</strong> Discover paths to financial gains, jobs, and referrals.</li>
              <li><strong class="text-blue-400">Networking üîó:</strong> Meet new people and explore fresh projects or partnerships.</li>
              <li><strong class="text-blue-400">Collaboration ü§ù:</strong> Work together, share skills, and build amazing stuff as a Community.</li>
              <li><strong class="text-blue-400">Community ü´Ç:</strong> Be part of a welcoming space where voices matter.</li>
              <li><strong class="text-blue-400">Social Skills Boost üéôÔ∏è:</strong> Gain confidence and improve how you speak and connect.</li>
              <li><strong class="text-blue-400">Personal Growth üå±:</strong> Learn new things and expand your perspective.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-700/50 py-12 px-6">
      <div class="max-w-6xl mx-auto">
        <div class="rounded-xl border bg-gradient-to-br from-blue-900/50 to-blue-800/50 border-blue-700 backdrop-blur-sm">
          <div class="p-8 text-center">
            <p class="text-gray-300">&copy; 2025 Bring Back VC. All rights reserved.</p>
            <div class="mt-4 flex justify-center space-x-6">
              <a href="https://t.me/join_vc" target="_blank" class="flex items-center space-x-2 text-blue-400 hover:text-blue-300 transition-colors duration-300" aria-label="Join our Telegram community">
                <i class="fab fa-telegram-plane text-lg"></i>
                <span>Telegram</span>
              </a>
              <a href="https://x.com/joinVC_cto" target="_blank" class="flex items-center space-x-2 text-blue-400 hover:text-blue-300 transition-colors duration-300" aria-label="Follow us on X">
                <i class="fab fa-x-twitter text-lg"></i>
                <span>X</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Wait for Firebase scripts to load before initializing
    document.addEventListener('DOMContentLoaded', () => {
      // Firebase Configuration
      const firebaseConfig = {
        // Replace with your Firebase project configuration
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_AUTH_DOMAIN",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_STORAGE_BUCKET",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
        appId: "YOUR_APP_ID"
      };

      // Initialize Firebase
      if (typeof firebase !== 'undefined') {
        firebase.initializeApp(firebaseConfig);
        window.storage = firebase.storage();
      } else {
        console.error('Firebase SDK not loaded. Please check the Firebase script inclusion.');
      }

      // 2D Canvas Setup
      const canvas = document.getElementById('studio-canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight * 0.6;

      // Load Background Image
      const bgImage = new Image();
      bgImage.src = 'https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?auto=format&fit=crop&w=3600&q=80';
      bgImage.onload = () => {
        ctx.drawImage(bgImage, 0, 0, canvas.width, canvas.height);
      };

      // Animation Loop
      function animate() {
        requestAnimationFrame(animate);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(bgImage, 0, 0, canvas.width, canvas.height);
      }
      animate();

      // Resize Handler
      window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight * 0.6;
        ctx.drawImage(bgImage, 0, 0, canvas.width, canvas.height);
      });

      // Copy to Clipboard Function
      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
          const tooltip = document.querySelector('#contract-address span');
          tooltip.textContent = 'Copied!';
          setTimeout(() => {
            tooltip.textContent = 'Click to copy';
          }, 2000);
        }).catch(err => {
          console.error('Failed to copy:', err);
        });
      }

      // Navigation Active State
      const navLinks = document.querySelectorAll('.nav-link');
      function setActiveNavLink() {
        const scrollPosition = window.scrollY + 100;
        navLinks.forEach(link => {
          const sectionId = link.getAttribute('href').substring(1);
          const section = document.getElementById(sectionId);
          if (section) {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;
            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
              navLinks.forEach(l => {
                l.classList.remove('text-white', 'bg-gradient-to-r', 'from-blue-500', 'to-purple-600');
                l.classList.add('text-gray-300');
              });
              link.classList.remove('text-gray-300');
              link.classList.add('text-white', 'bg-gradient-to-r', 'from-blue-500', 'to-purple-600');
            }
          }
        });
      }

      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const sectionId = link.getAttribute('href').substring(1);
          const section = document.getElementById(sectionId);
          if (section) {
            window.scrollTo({
              top: section.offsetTop - 80,
              behavior: 'smooth'
            });
            navLinks.forEach(l => {
              l.classList.remove('text-white', 'bg-gradient-to-r', 'from-blue-500', 'to-purple-600');
              l.classList.add('text-gray-300');
            });
            link.classList.remove('text-gray-300');
            link.classList.add('text-white', 'bg-gradient-to-r', 'from-blue-500', 'to-purple-600');
          }
        });
      });

      window.addEventListener('scroll', setActiveNavLink);
      window.addEventListener('load', setActiveNavLink);

      // Welcome Pop-up
      const joinNowBtn = document.getElementById('join-now-btn');
      joinNowBtn.addEventListener('click', () => {
        document.getElementById('welcome-popup').style.display = 'none';
      });

      // Voice Recording Functionality
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      let mediaRecorder;
      let recordedChunks = [];
      let recordedBuffer;
      const recordBtn = document.getElementById('record-btn');
      const stopBtn = document.getElementById('stop-btn');
      const recordStatus = document.getElementById('record-status');
      const effectControls = document.getElementById('effect-controls');
      const effectSelect = document.getElementById('effect-select');
      const eqLow = document.getElementById('eq-low');
      const eqMid = document.getElementById('eq-mid');
      const eqHigh = document.getElementById('eq-high');
      const recordingNameInput = document.getElementById('recording-name');
      const saveBtn = document.getElementById('save-btn');
      const uploadAudio = document.getElementById('upload-audio');
      const recordingsList = document.getElementById('recordings-list');
      let recordings = [];

      // Check Microphone Permission
      async function checkMicPermission() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          stream.getTracks().forEach(track => track.stop());
          recordBtn.disabled = false;
          recordStatus.textContent = 'Ready to record';
        } catch (err) {
          recordStatus.textContent = 'Microphone access denied';
          console.error('Microphone permission error:', err);
        }
      }
      checkMicPermission();

      async function startRecording() {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
          mediaRecorder = new MediaRecorder(stream);
          mediaRecorder.ondataavailable = (e) => {
            if (e.data.size > 0) recordedChunks.push(e.data);
          };
          mediaRecorder.onstop = async () => {
            const blob = new Blob(recordedChunks, { type: 'audio/webm' });
            recordedChunks = [];
            const reader = new FileReader();
            reader.onload = async () => {
              const arrayBuffer = reader.result;
              recordedBuffer = await audioCtx.decodeAudioData(arrayBuffer);
              effectControls.classList.remove('hidden');
              recordStatus.textContent = 'Apply effects and save your recording';
              recordBtn.classList.remove('hidden');
              stopBtn.classList.add('hidden');
            };
            reader.readAsArrayBuffer(blob);
          };
          mediaRecorder.start();
          recordStatus.textContent = 'Recording... Click Stop or press ESC';
          recordBtn.classList.add('hidden');
          stopBtn.classList.remove('hidden');
        } catch (err) {
          recordStatus.textContent = 'Error accessing microphone';
          console.error(err);
        }
      }

      function stopRecording() {
        if (mediaRecorder && mediaRecorder.state === 'recording') {
          mediaRecorder.stop();
        }
      }

      async function applyAudioEffect(audioBuffer, effect, eqSettings) {
        const offlineCtx = new OfflineAudioContext(1, audioBuffer.length, audioBuffer.sampleRate);
        const source = offlineCtx.createBufferSource();
        source.buffer = audioBuffer;

        let lastNode = source;

        // Apply Equalizer
        const lowFilter = offlineCtx.createBiquadFilter();
        lowFilter.type = 'lowshelf';
        lowFilter.frequency.setValueAtTime(300, offlineCtx.currentTime);
        lowFilter.gain.setValueAtTime(eqSettings.low, offlineCtx.currentTime);
        lastNode.connect(lowFilter);
        lastNode = lowFilter;

        const midFilter = offlineCtx.createBiquadFilter();
        midFilter.type = 'peaking';
        midFilter.frequency.setValueAtTime(1000, offlineCtx.currentTime);
        midFilter.gain.setValueAtTime(eqSettings.mid, offlineCtx.currentTime);
        lastNode.connect(midFilter);
        lastNode = midFilter;

        const highFilter = offlineCtx.createBiquadFilter();
        highFilter.type = 'highshelf';
        highFilter.frequency.setValueAtTime(3000, offlineCtx.currentTime);
        highFilter.gain.setValueAtTime(eqSettings.high, offlineCtx.currentTime);
        lastNode.connect(highFilter);
        lastNode = highFilter;

        // Apply Effect
        if (effect === 'reverb') {
          const convolver = offlineCtx.createConvolver();
          const impulse = createImpulseResponse(offlineCtx, 2, 0.5);
          convolver.buffer = impulse;
          lastNode.connect(convolver);
          lastNode = convolver;
        } else if (effect === 'pitch-up') {
          source.playbackRate.value = 1.2;
        } else if (effect === 'pitch-down') {
          source.playbackRate.value = 0.8;
        }

        lastNode.connect(offlineCtx.destination);
        source.start();
        return await offlineCtx.startRendering();
      }

      function createImpulseResponse(context, duration, decay) {
        const length = context.sampleRate * duration;
        const impulse = context.createBuffer(1, length, context.sampleRate);
        const data = impulse.getChannelData(0);
        for (let i = 0; i < length; i++) {
          data[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / length, decay);
        }
        return impulse;
      }

      async function audioBufferToWav(buffer) {
        const numChannels = buffer.numberOfChannels;
        const sampleRate = buffer.sampleRate;
        const length = buffer.length * numChannels * 2;
        const wavBuffer = new ArrayBuffer(44 + length);
        const view = new DataView(wavBuffer);

        writeString(view, 0, 'RIFF');
        view.setUint32(4, 36 + length, true);
        writeString(view, 8, 'WAVE');
        writeString(view, 12, 'fmt ');
        view.setUint32(16, 16, true);
        view.setUint16(20, 1, true);
        view.setUint16(22, numChannels, true);
        view.setUint32(24, sampleRate, true);
        view.setUint32(28, sampleRate * numChannels * 2, true);
        view.setUint16(32, numChannels * 2, true);
        view.setUint16(34, 16, true);
        writeString(view, 36, 'data');
        view.setUint32(40, length, true);

        const channelData = buffer.getChannelData(0);
        for (let i = 0; i < buffer.length; i++) {
          view.setInt16(44 + i * 2, channelData[i] * 0x7FFF, true);
        }

        return new Blob([view], { type: 'audio/wav' });
      }

      function writeString(view, offset, string) {
        for (let i = 0; i < string.length; i++) {
          view.setUint8(offset + i, string.charCodeAt(i));
        }
      }

      async function saveRecording() {
        if (!window.storage) {
          recordStatus.textContent = 'Firebase not initialized';
          return;
        }
        const effect = effectSelect.value;
        const eqSettings = {
          low: parseFloat(eqLow.value),
          mid: parseFloat(eqMid.value),
          high: parseFloat(eqHigh.value)
        };
        const name = recordingNameInput.value.trim() || `Recording_${new Date().toLocaleString()}`;
        const processedBuffer = await applyAudioEffect(recordedBuffer, effect, eqSettings);
        const blob = await audioBufferToWav(processedBuffer);
        const fileName = `${name}_${Date.now()}.wav`;
        try {
          const storageRef = window.storage.ref(`recordings/${fileName}`);
          await storageRef.put(blob);
          const url = await storageRef.getDownloadURL();
          addRecordingToArchive(name, url, fileName);
          effectControls.classList.add('hidden');
          recordStatus.textContent = 'Recording saved to cloud!';
          recordingNameInput.value = '';
          eqLow.value = 0;
          eqMid.value = 0;
          eqHigh.value = 0;
          effectSelect.value = 'none';
        } catch (err) {
          recordStatus.textContent = 'Error saving recording to cloud';
          console.error('Firebase save error:', err);
        }
      }

      async function handleAudioUpload(file) {
        if (!window.storage) {
          recordStatus.textContent = 'Firebase not initialized';
          return;
        }
        const reader = new FileReader();
        reader.onload = async () => {
          try {
            const arrayBuffer = reader.result;
            const audioBuffer = await audioCtx.decodeAudioData(arrayBuffer);
            const name = prompt('Enter a name for the uploaded audio:', file.name) || file.name;
            const blob = await audioBufferToWav(audioBuffer);
            const fileName = `${name}_${Date.now()}.wav`;
            const storageRef = window.storage.ref(`recordings/${fileName}`);
            await storageRef.put(blob);
            const url = await storageRef.getDownloadURL();
            addRecordingToArchive(name, url, fileName);
            recordStatus.textContent = 'Audio uploaded and saved to cloud!';
          } catch (err) {
            recordStatus.textContent = 'Error processing uploaded audio';
            console.error('Upload error:', err);
          }
        };
        reader.readAsArrayBuffer(file);
      }

      function addRecordingToArchive(name, url, fileName) {
        const recording = { name, url, id: Date.now(), fileName };
        recordings.push(recording);
        const recordingDiv = document.createElement('div');
        recordingDiv.className = 'p-6 bg-gradient-to-br from-blue-900/70 to-purple-900/70 border border-blue-700 rounded-xl shadow-lg transform transition-all duration-300 hover:scale-105 hover:shadow-xl';
        recordingDiv.innerHTML = `
          <div class="flex flex-col space-y-4">
            <div class="flex items-center space-x-4">
              <i class="fas fa-microphone-alt text-2xl text-yellow-400"></i>
              <span class="text-lg font-semibold text-gray-200">${name}</span>
            </div>
            <audio controls src="${url}" class="w-full rounded-lg bg-gray-800/50 accent-blue-500"></audio>
            <div class="flex justify-end space-x-2">
              <button class="rename-btn bg-blue-500 hover:bg-blue-600 text-gray-900 py-1 px-3 rounded text-sm font-medium" data-id="${recording.id}" data-filename="${fileName}">Rename</button>
              <button class="delete-btn bg-red-500 hover:bg-red-600 text-gray-900 py-1 px-3 rounded text-sm font-medium" data-id="${recording.id}" data-filename="${fileName}">Delete</button>
            </div>
          </div>
        `;
        recordingsList.prepend(recordingDiv);
      }

      async function loadRecordings() {
        if (!window.storage) {
          console.error('Firebase storage not initialized');
          return;
        }
        try {
          const storageRef = window.storage.ref('recordings');
          const listResult = await storageRef.listAll();
          recordingsList.innerHTML = '';
          recordings = [];
          for (const itemRef of listResult.items) {
            const url = await itemRef.getDownloadURL();
            const name = itemRef.name.split('_').slice(0, -1).join('_') || 'Unnamed Recording';
            addRecordingToArchive(name, url, itemRef.name);
          }
        } catch (err) {
          console.error('Error loading recordings:', err);
        }
      }

      // Event Listeners
      recordBtn.addEventListener('click', startRecording);
      stopBtn.addEventListener('click', stopRecording);
      saveBtn.addEventListener('click', saveRecording);
      uploadAudio.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
          handleAudioUpload(e.target.files[0]);
        }
      });

      recordingsList.addEventListener('click', async (e) => {
        if (!window.storage) {
          console.error('Firebase storage not initialized');
          return;
        }
        if (e.target.classList.contains('rename-btn')) {
          const id = parseInt(e.target.dataset.id);
          const fileName = e.target.dataset.filename;
          const recording = recordings.find(r => r.id === id);
          if (recording) {
            const newName = prompt('Enter new name for the recording:', recording.name);
            if (newName) {
              try {
                const oldRef = window.storage.ref(`recordings/${fileName}`);
                const blob = await (await fetch(recording.url)).blob();
                const newFileName = `${newName}_${Date.now()}.wav`;
                const newRef = window.storage.ref(`recordings/${newFileName}`);
                await newRef.put(blob);
                await oldRef.delete();
                recording.name = newName;
                recording.fileName = newFileName;
                recording.url = await newRef.getDownloadURL();
                const recordingDiv = e.target.closest('div');
                recordingDiv.querySelector('span').textContent = newName;
                recordingDiv.querySelector('audio').src = recording.url;
                recordingDiv.querySelector('.rename-btn').dataset.filename = newFileName;
                recordingDiv.querySelector('.delete-btn').dataset.filename = newFileName;
              } catch (err) {
                console.error('Error renaming recording:', err);
              }
            }
          }
        } else if (e.target.classList.contains('delete-btn')) {
          const id = parseInt(e.target.dataset.id);
          const fileName = e.target.dataset.filename;
          try {
            await window.storage.ref(`recordings/${fileName}`).delete();
            recordings = recordings.filter(r => r.id !== id);
            e.target.closest('div').remove();
          } catch (err) {
            console.error('Error deleting recording:', err);
          }
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && mediaRecorder && mediaRecorder.state === 'recording') {
          stopRecording();
        }
      });

      // Load recordings on page load
      window.addEventListener('load', loadRecordings);

      // Fetch Crypto Data
      async function updateCryptoData() {
        try {
          const price = 0.000000;
          const holders = 1677;
          const priceChange = 'N/A';
          const volume = 'N/A';
          const now = new Date().toLocaleTimeString('en-US', { hour12: false });
          document.getElementById('price').textContent = `$${price.toFixed(6)}`;
          document.getElementById('holders').textContent = holders.toLocaleString();
          document.getElementById('price-change').textContent = priceChange;
          document.getElementById('volume').textContent = volume;
          document.getElementById('last-updated').textContent = `Last updated: ${now}`;
          console.log('Crypto data updated:', { price, holders, priceChange, volume });

          // Animate Holders card on data update
          gsap.to('#holders-card', {
            y: -10,
            duration: 0.5,
            yoyo: true,
            repeat: 1,
            ease: 'power2.inOut'
          });
        } catch (err) {
          console.error('Error fetching crypto data:', err.message);
          document.getElementById('price').textContent = '$0.000000';
          document.getElementById('holders').textContent = '1,677';
          document.getElementById('price-change').textContent = 'N/A';
          document.getElementById('volume').textContent = 'N/A';
          document.getElementById('last-updated').textContent = `Last updated: ${new Date().toLocaleTimeString('en-US', { hour12: false })}`;
          console.warn('Using fallback crypto data');
        }
        setTimeout(updateCryptoData, 30000);
      }
      updateCryptoData();

      // GSAP Animations for Tokenomics and Live Token Data
      document.getElementById('total-supply-card').addEventListener('mouseenter', () => {
        gsap.to('#total-supply-card', {
          scale: 1.1,
          duration: 0.3,
          ease: 'power2.out'
        });
      });
      document.getElementById('total-supply-card').addEventListener('mouseleave', () => {
        gsap.to('#total-supply-card', {
          scale: 1,
          duration: 0.3,
          ease: 'power2.out'
        });
      });

      document.getElementById('price-card').addEventListener('mouseenter', () => {
        gsap.to('#price-card', {
          scale: 1.1,
          duration: 0.3,
          ease: 'power2.out'
        });
      });
      document.getElementById('price-card').addEventListener('mouseleave', () => {
        gsap.to('#price-card', {
          scale: 1,
          duration: 0.3,
          ease: 'power2.out'
        });
      });
    });
  </script>
</body>
</html>
